(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{15:function(e,t,n){e.exports=n(32)},20:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),i=n.n(o),c=(n(20),n(2)),s=n(5),p=n(8),l=n(4),u=function(e,t){return{type:"SHOOT_LOCATION",rowIndex:e,colIndex:t}},m=function(e,t){var n=0,a=0;return t.forEach((function(t,r){for(var o=t[0],i=t[1],c=o[0]>i[0]?o[0]:i[0],s=o[0]<i[0]?o[0]:i[0],p=o[1]>i[1]?o[1]:i[1],l=o[1]<i[1]?o[1]:i[1],u=p-l+1,m=c-s+1,h=u>m?u:m,f=s;f<=c;f++)for(var S=l;S<=p;S++){if(0===e[f][S])return;S===p&&1===e[f][S]&&(n=h,a=r)}})),{shipSize:n,shipIndex:a}},h=function(e,t,n,a,r){var o=function(e,t,n,a){var r,o=!0,i=t[0]>n[0]?t[0]:n[0],c=t[0]<n[0]?t[0]:n[0],s=t[1]>n[1]?t[1]:n[1],p=t[1]<n[1]?t[1]:n[1],l=s-p+1,u=i-c+1;if(1===l&&a.includes(u))r=u;else{if(1!==u||!a.includes(l))return{newBoard:e,shipSize:0};r=l}var m=e.map((function(e,t){return t<c||t>i?e:e.map((function(e,t){return t<p||t>s?e:1===e?(o=!1,1):1}))}));return o?{newBoard:m,shipSize:r}:{newBoard:e,shipSize:0}}(t,n,a,r);return{type:"PLACE_SHIP",newBoard:o.newBoard,side:e,shipSize:o.shipSize,startCoordinates:n,endCoordinates:a}};function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(){return Object(l.a)(Array(10).keys()).map((function(){return Array(10).fill(0)}))},b={gameState:"placement",shipSizesLeft:[5,4,3,3,2],opponentShipSizesLeft:[5,4,3,3,2],turn:"player",shipLocations:[],opponentShipLocations:[],winner:null,board:d(),opponentBoard:d(),attempts:d(),opponentAttempts:d()},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PLACE_SHIP":return Object.assign({},e,"player"===t.side?{board:t.newBoard,shipLocations:[].concat(Object(l.a)(e.shipLocations.slice()),[[t.startCoordinates,t.endCoordinates]])}:{opponentBoard:t.newBoard,opponentShipLocations:[].concat(Object(l.a)(e.opponentShipLocations.slice()),[[t.startCoordinates,t.endCoordinates]])});case"BEGIN_BATTLE_PHASE":return S({},e,{gameState:"battle"});case"SHOOT_LOCATION":var n="player"===e.turn,a=n?e.attempts:e.opponentAttempts,r=a.map((function(e,n){if(n!==t.rowIndex)return e;var a=e.slice();return a.splice(t.colIndex,1,1),a})),o=n?e.opponentShipLocations.slice():e.shipLocations.slice(),i=n?e.opponentShipSizesLeft.slice():e.shipSizesLeft.slice(),c=m(r,o),s=c.shipSize,p=c.shipIndex;if(s>0){o.splice(p,1);var u=i.findIndex((function(e){return e===s}));i.splice(u,1)}return Object.assign({},e,"player"===e.turn?{turn:"opponent",attempts:r,opponentShipLocations:o,opponentShipSizesLeft:i}:{turn:"player",opponentAttempts:r,shipLocations:o,shipSizesLeft:i});case"ANNOUNCE_VICTORY":return S({},e,{gameState:"complete",winner:t.winner});default:return e}};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={shipSizesToPlace:[5,4,3,3,2],opponentShipSizesToPlace:[5,4,3,3,2],placementStarted:!1,startCoordinates:null},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_PLACEMENT":return O({},e,{placementStarted:!0,startCoordinates:t.coordinates});case"PLACE_SHIP":var n="player"===t.side,a=n?e.shipSizesToPlace:e.opponentShipSizesToPlace,r=a.findIndex((function(e){return e===t.shipSize})),o=a.slice();return-1!==r&&o.splice(r,1),Object.assign({},e,n?{placementStarted:!1,startCoordinates:null,shipSizesToPlace:o}:{opponentShipSizesToPlace:o});default:return e}},w=Object(s.b)({gameState:y,shipPlacement:P}),E=function(e,t){return"player"===t.side?e.gameState.board:e.gameState.opponentBoard},L=function(e,t){return"player"===t.side?e.gameState.opponentAttempts:e.gameState.attempts},z=function(e,t){return"player"===t.side?e.gameState.shipSizesLeft:e.gameState.opponentShipSizesLeft},T=function(e,t){return"player"===t.side?e.shipPlacement.shipSizesToPlace:e.shipPlacement.opponentShipSizesToPlace},j=(n(28),{shootLocation:u,startPlacement:function(e){return{type:"START_PLACEMENT",coordinates:e}},placeShip:h}),C=Object(c.b)((function(e,t){return{gameState:e.gameState.gameState,turn:e.gameState.turn,ships:E(e,t),attempts:L(e,t),placementStarted:e.shipPlacement.placementStarted,startCoordinates:e.shipPlacement.startCoordinates,shipSizesToPlace:T(e,t)}}),j)((function(e){var t=e.gameState,n=e.side,a=e.turn,o=e.row,i=e.col,c=e.ships,s=e.attempts,p=e.shootLocation,l=e.placementStarted,u=e.startPlacement,m=e.startCoordinates,h=e.placeShip,f=e.shipSizesToPlace,S=1===s[o][i],d=1===c[o][i],b="player"===n&&m&&o===m[0]&&i===m[1]?"placing":null,y=S?d?"hit":"miss":null,g="player"===n&&d?"ship":null;return r.a.createElement("td",{className:"".concat(y||g||b),onClick:function(e){switch(e.preventDefault(),t){case"placement":if("opponent"===n)return;return void(l?h(n,c,m,[o,i],f):d||u([o,i]));case"battle":return void(y||"opponent"!==n||"player"!==a||p(o,i));default:return}}},r.a.createElement("div",{className:"cell"},"(",String.fromCharCode(i+65),", ",o+1,")"))})),k=(n(29),Object(c.b)((function(e,t){return{shipSizesLeft:z(e,t),gameState:e.gameState.gameState,shipSizesToPlace:T(e,t)}}))((function(e){var t=e.side,n=e.shipSizesLeft,a=e.gameState,o=e.shipSizesToPlace,i=Object(l.a)(Array(10).keys()).map((function(e){return e+1})),c=Object(l.a)(Array(10).keys()).map((function(e){return String.fromCharCode(e+65)})),s="".concat(t.charAt(0).toUpperCase()+t.slice(1),"'s board"),p="placement"===a?"Ship sizes left to place: [".concat(o,"]"):"battle"===a?"Ship sizes left to sink: [".concat(n,"]"):null;return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("h2",null,s),r.a.createElement("h3",null,p),r.a.createElement("table",{className:"container"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"header"}),c.map((function(e){return r.a.createElement("th",{className:"header",key:e},r.a.createElement("div",{className:"tableContent"},e))})))),r.a.createElement("tbody",null,i.map((function(e,n){return r.a.createElement("tr",{key:e},r.a.createElement("td",{className:"header"},e),c.map((function(a,o){return r.a.createElement(C,{key:"".concat(a).concat(e),className:"tableContent",row:n,col:o,side:t})})))})))))}))),A=Object(c.b)((function(e){return{gameState:e.gameState.gameState,winner:e.gameState.winner}}))(r.a.memo((function(e){var t,n,a=e.gameState,o=e.winner;switch(a){case"placement":t="Place Your Ships!",n="Click a cell to start placing a ship. Your ship must be placed vertically         or horizontally. The battle will begin when both players have placed all their ships!";break;case"battle":t="Defend The Bay!",n="Click on the opponent's cells to fire your attack. Cells where ships were hit will         be marked red. Cells where attacks missed will be marked white.";break;default:t="player"===o?"You Win!":"You Lose!"}return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,t),r.a.createElement("p",null,n))}))),N=(n(30),Object(c.b)((function(e){return{turn:e.gameState.turn,gameState:e.gameState.gameState}}))((function(e){var t=e.turn,n="battle"===e.gameState,a="player"===t;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"titleSection"},r.a.createElement("h1",null,"Battleship"),r.a.createElement("p",null,"by Jason Lan")),r.a.createElement(A,null),r.a.createElement("div",{className:"gameContainer"},r.a.createElement("div",{className:"screen ".concat(n?a?"active":"inActive":null)},r.a.createElement(k,{side:"opponent"})),r.a.createElement("div",{className:"screen ".concat(n?a?"inActive":"active":null)},r.a.createElement(k,{side:"player"}))))}))),B=n(6),x=n.n(B),I=n(11),R=n(1),_=n.n(R);function q(e){return new Promise((function(t){return setTimeout(t,e)}))}var D=function(e){var t=e.turn,n=e.gameState,a=e.opponentAttempts,r=e.shipSizesLeft,o=e.opponentShipSizesLeft,i=e.opponentBoard,c=e.shootLocation,s=e.shipSizesToPlace,p=e.opponentShipSizesToPlace,l=e.placeShip,u=e.beginBattlePhase,m=e.announceVictory,h=e.children,f=function(e,t){for(var n=0;n<e.length;n++){var a=e[n];if(1!==a[0])for(var r=0;r<t&&1!==a[r];r++)if(r===t-1)return{start:[n,0],end:[n,r]}}throw new Error("AI could not place ship")},S=function(){var e=Object(I.a)(x.a.mark((function e(){var t,n,a,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(500);case 2:void 0!==(t=p[0])&&(n=f(i,t),a=n.start,r=n.end,l("opponent",i,a,r,p));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(I.a)(x.a.mark((function e(){var n,r,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("opponent"!==t){e.next=17;break}n=0;case 2:if(!(n<a.length)){e.next=17;break}o=a[n],r=0;case 5:if(!(r<o.length)){e.next=14;break}if(0!==o[r]){e.next=11;break}return e.next=9,q(500);case 9:return c(n,r),e.abrupt("return");case 11:r++,e.next=5;break;case 14:n++,e.next=2;break;case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();switch(n){case"placement":S(),0===s.length&&0===p.length&&u();break;case"battle":d(),0===r.length?m("opponent"):0===o.length&&m("player")}return h},H={shootLocation:u,placeShip:h,beginBattlePhase:function(){return{type:"BEGIN_BATTLE_PHASE"}},announceVictory:function(e){return{type:"ANNOUNCE_VICTORY",winner:e}}};D.propTypes={turn:_.a.oneOf(["player","opponent"]).isRequired,gameState:_.a.oneOf(["placement","battle","complete"]).isRequired,opponentBoard:_.a.arrayOf(_.a.arrayOf(_.a.number)).isRequired,opponentAttempts:_.a.arrayOf(_.a.arrayOf(_.a.number)).isRequired,shipSizesToPlace:_.a.arrayOf(_.a.number).isRequired,opponentShipSizesToPlace:_.a.arrayOf(_.a.number).isRequired,shipLocations:_.a.arrayOf(_.a.arrayOf(_.a.arrayOf(_.a.number))),opponentShipLocations:_.a.arrayOf(_.a.arrayOf(_.a.arrayOf(_.a.number))),shipSizesLeft:_.a.arrayOf(_.a.number).isRequired,opponentShipSizesLeft:_.a.arrayOf(_.a.number).isRequired,shootLocation:_.a.func.isRequired,announceVictory:_.a.func.isRequired};var Y=Object(c.b)((function(e){return{turn:e.gameState.turn,opponentBoard:e.gameState.opponentBoard,opponentAttempts:e.gameState.opponentAttempts,gameState:e.gameState.gameState,shipSizesToPlace:e.shipPlacement.shipSizesToPlace,opponentShipSizesToPlace:e.shipPlacement.opponentShipSizesToPlace,shipLocations:e.gameState.shipLocations,opponentShipLocations:e.gameState.opponentShipLocations,shipSizesLeft:e.gameState.shipSizesLeft,opponentShipSizesLeft:e.gameState.opponentShipSizesLeft}}),H)(D);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=Object(s.c)(w);i.a.render(r.a.createElement(c.a,{store:V},r.a.createElement(Y,null,r.a.createElement(N,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[15,1,2]]]);
//# sourceMappingURL=main.73ee4740.chunk.js.map